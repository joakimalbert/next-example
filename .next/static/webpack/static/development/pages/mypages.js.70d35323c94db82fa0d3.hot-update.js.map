{"version":3,"file":"static/webpack/static/development/pages/mypages.js.70d35323c94db82fa0d3.hot-update.js","sources":["webpack:///./pages/mypages.js"],"sourcesContent":["import React from 'react';\nimport { withNamespaces } from '../i18n';\nimport app from 'firebase/app';\nimport 'firebase/auth';\nimport 'firebase/database';\n\n// Should be env variables but adding just for test and not here\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBmvFYEVOt22dV6-TXkIFwFxtNOPZ2nTFU\",\n    authDomain: \"albert-sandbox.firebaseapp.com\",\n    databaseURL: \"https://albert-sandbox.firebaseio.com\",\n    projectId: \"firebase-albert-sandbox\",\n    storageBucket: \"firebase-albert-sandbox.appspot.com\",\n    messagingSenderId: \"357981576708\"\n};\n\nclass MyPages extends React.Component {\n  static async getInitialProps() {\n    return {\n      namespacesRequired: ['common']\n    }\n  }\n\n  constructor(props) {\n      super(props);\n      this.state = { user: null };\n  };\n\n  componentDidMount() {\n    if (!app.apps.length) {\n        app.initializeApp(firebaseConfig);\n    }\n    console.log(this);\n    // To support email and phone number we need to validate if email first, then run the email login, otherwise use the /phone/login\n    app.auth().signInWithEmailAndPassword('joakim@hejalbert.se', '332625')\n      .then(res => {\n        console.log(res.user.uid);\n\n        app.database().ref('/users/' + res.user.uid).once('value').then(snap =>  {\n          if (snap.exists()) {\n              const userdata = snap.val();\n              console.log(userdata);\n              this.setState({ user: userdata });\n          }\n        });\n\n      })\n      .catch(function(error) {\n        console.log(error);\n      });\n  }\n\n  render() {\n    const { t } = this.props;\n    console.log(this.state);\n    return (\n      <React.Fragment>\n        <h1>{t('h1')}</h1>\n        {this.state.user &&\n            <React.Fragment>\n                <p>hej</p>\n                <p>Email: {this.state.user.email}</p>\n                <p>Premium: {this.state.user.premium}</p>\n            </React.Fragment>\n        }\n      </React.Fragment>\n    )\n  }\n}\n\nexport default withNamespaces('common')(MyPages)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AAQA;;;;;;;;;;;;;;;AAEA;AACA;AADA;AACA;;;;;;;;;;;;;;;;;AAIA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AAFA;AAGA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;AAEA;AACA;AACA;;;AAEA;AAAA;AAEA;AACA;AAYA;;;;AAnDA;AACA;AAqDA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}